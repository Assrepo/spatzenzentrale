{
  "title": "Bot Management",
  "description": "Multi-Bot News-Scraping verwalten, Bots testen und konfigurieren",
  "icon": "ü§ñ",
  "layout": "two-column",
  "sections": [
    {
      "id": "bot-selection",
      "title": "Bot-Auswahl",
      "icon": "üéØ",
      "column": "left",
      "components": [
        {
          "type": "select",
          "id": "selectedBot",
          "label": "Verf√ºgbare ChatBots",
          "dataSource": {
            "endpoint": "/botbucket/bots",
            "valueField": "id",
            "labelField": "name"
          },
          "defaultValue": "a43b3038-423e-47ab-8226-a8714418c88f"
        },
        {
          "type": "button",
          "label": "Bot-Verbindung testen",
          "icon": "üß™",
          "action": {
            "type": "api",
            "endpoint": "/botbucket/test",
            "method": "POST",
            "params": ["selectedBot"],
            "successMessage": "Bot-Verbindung erfolgreich!",
            "errorMessage": "Bot-Test fehlgeschlagen"
          },
          "variant": "primary",
          "fullWidth": true
        }
      ]
    },
    {
      "id": "scraping-config",
      "title": "Scraping-Konfiguration",
      "icon": "‚öôÔ∏è",
      "column": "left",
      "components": [
        {
          "type": "textarea",
          "id": "customQuestion",
          "label": "Eigene Frage (optional)",
          "placeholder": "Berichte √ºber die neuesten News...",
          "rows": 3,
          "hint": "Leer lassen f√ºr Standard-Frage"
        },
        {
          "type": "checkbox",
          "id": "saveToDatabase",
          "label": "News automatisch in Datenbank speichern",
          "defaultValue": true
        }
      ]
    },
    {
      "id": "scraping-actions",
      "title": "Scraping-Aktionen",
      "icon": "üöÄ",
      "column": "left",
      "components": [
        {
          "type": "button",
          "label": "Scraping via API starten",
          "icon": "üåê",
          "action": {
            "type": "api",
            "endpoint": "/botbucket/fetch",
            "method": "POST",
            "params": ["selectedBot", "customQuestion", "saveToDatabase"],
            "successMessage": "API-Scraping erfolgreich abgeschlossen",
            "errorMessage": "API-Scraping fehlgeschlagen",
            "onSuccess": "refreshHistory"
          },
          "variant": "success",
          "fullWidth": true
        },
        {
          "type": "button",
          "label": "Scraping via Puppeteer starten",
          "icon": "üé≠",
          "action": {
            "type": "api",
            "endpoint": "/botbucket/scrape",
            "method": "POST",
            "params": ["customQuestion", "saveToDatabase"],
            "successMessage": "Puppeteer-Scraping erfolgreich abgeschlossen",
            "errorMessage": "Puppeteer-Scraping fehlgeschlagen",
            "onSuccess": "refreshHistory"
          },
          "variant": "secondary",
          "fullWidth": true
        },
        {
          "type": "info",
          "items": [
            "‚Ä¢ <strong>API-Scraping:</strong> Schnell, modern, √ºber HTTPS",
            "‚Ä¢ <strong>Puppeteer-Scraping:</strong> Vollst√§ndiger Browser, Fallback-Option"
          ]
        }
      ]
    },
    {
      "id": "last-result",
      "title": "Letztes Scraping-Ergebnis",
      "icon": "üìä",
      "column": "right",
      "condition": "lastScrapingResult",
      "components": [
        {
          "type": "keyvalue",
          "id": "resultSummary",
          "dataSource": "lastScrapingResult",
          "fields": [
            {"key": "method", "label": "Methode"},
            {"key": "timestamp", "label": "Zeit", "format": "datetime"},
            {"key": "scraped", "label": "Gefunden", "suffix": " Artikel"},
            {"key": "saved", "label": "Gespeichert", "suffix": " Artikel"}
          ]
        },
        {
          "type": "list",
          "id": "scrapedArticles",
          "title": "Gefundene Artikel",
          "dataSource": "lastScrapingResult.data",
          "itemTemplate": {
            "title": "{{title}}",
            "subtitle": "{{date}}"
          },
          "maxItems": 5,
          "maxHeight": "160px"
        }
      ]
    },
    {
      "id": "system-status",
      "title": "System-Status",
      "icon": "üîç",
      "column": "right",
      "components": [
        {
          "type": "statuslist",
          "items": [
            {"label": "BotBucket API", "status": "online", "icon": "‚úÖ"},
            {"label": "Puppeteer Service", "status": "ready", "icon": "‚úÖ"},
            {"label": "Datenbank", "status": "connected", "icon": "‚úÖ"},
            {"label": "Verf√ºgbare Bots", "dataSource": "availableBots.length"}
          ]
        }
      ]
    },
    {
      "id": "quick-actions",
      "title": "Quick Actions",
      "icon": "‚ö°",
      "column": "right",
      "components": [
        {
          "type": "buttongroup",
          "buttons": [
            {
              "label": "üì∞ News anzeigen",
              "action": {"type": "navigate", "target": "/news-flash"}
            },
            {
              "label": "üîÑ History laden",
              "action": {"type": "refresh", "target": "scrapingHistory"}
            }
          ]
        }
      ]
    },
    {
      "id": "scraping-history",
      "title": "Scraping History",
      "icon": "üìú",
      "column": "full",
      "components": [
        {
          "type": "datatable",
          "id": "historyTable",
          "dataSource": {
            "endpoint": "/botbucket/history",
            "params": {"limit": 20}
          },
          "columns": [
            {"field": "method", "header": "Methode", "width": "100px"},
            {"field": "status", "header": "Status", "type": "badge"},
            {"field": "newsCount", "header": "Gefunden", "width": "100px"},
            {"field": "saved", "header": "Gespeichert", "width": "100px"},
            {"field": "timestamp", "header": "Zeitpunkt", "type": "datetime"}
          ],
          "expandable": {
            "field": "newsData",
            "template": "newslist"
          },
          "actions": [
            {
              "label": "üîÑ Aktualisieren",
              "action": {"type": "refresh"}
            },
            {
              "label": "üßπ History l√∂schen",
              "action": {
                "type": "api",
                "endpoint": "/botbucket/history?confirm=true",
                "method": "DELETE",
                "confirm": {
                  "title": "History l√∂schen",
                  "message": "M√∂chtest du wirklich alle Scraping-Eintr√§ge l√∂schen? Dieser Vorgang kann nicht r√ºckg√§ngig gemacht werden.",
                  "confirmText": "Ja, l√∂schen",
                  "cancelText": "Abbrechen"
                }
              },
              "variant": "danger"
            }
          ],
          "maxHeight": "400px",
          "emptyState": {
            "icon": "üì≠",
            "title": "Noch keine Scraping-Aktivit√§ten",
            "subtitle": "Starte ein Scraping um History zu sehen"
          }
        }
      ]
    }
  ]
}
